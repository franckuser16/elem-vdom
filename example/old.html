<!DOCTYPE html>
<html>
    <head>
        <title>Demos</title>
        <link href="./fonts/Montserrat.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="./css/bootstrap.min.css">
    </head>
    <body>
        <div class="container-fluid">
            <div class="row">
                <div id="app" class="col-md-6"></div>
                <div id="app2" class="col-md-6"></div>
            </div>
            <div class="row">
                <div id="perf" class="col-md-12"></div>
            </div>
        </div>
        <script src="/assets/elem.js" type="text/javascript"></script>
        <script src="./js/moment.min.js" type="text/javascript"></script>
        <script type="text/javascript">
          var Style = Elem.style({
            circle: {
              borderRadius: '50%',
              width: '120px',
              height: '120px',
              marginLeft: '10px',
              marginTop: '10px',
              background: 'white',
              border: '3px solid #61b2a7',
              position: 'relative',
            },
            circleCentered: {
              position: 'absolute',
              top: '55%',
              left: '0px',
              width: '120px',
              textAlign: 'center',
              fontFamily: "'Montserrat',sans-serif",
              textShadow: '1px 1px 1px rgba(34, 34, 34, 0.5)'
            },
            circleSecond: {
              width: '0',
              height: '0',
              position: 'absolute',
              top: '50%',
              left: '50%',
              margin: '-40% -1px 0 0',
              padding: '40% 1px 0',
              background: '#61b2a9',
              '-webkit-transform-origin': '50% 100%',
              '-ms-transform-origin': '50% 100%',
              transformOrigin: '50% 100%'
            },
            circleMinute: {
              width: '0',
              height: '0',
              position: 'absolute',
              top: '50%',
              left: '50%',
              margin: '-40% -3px 0',
              padding: '40% 3px 0',
              borderRadius: '3px',
              background: '#61b2a7',
              '-webkit-transform-origin': '50% 100%',
              '-ms-transform-origin': '50% 100%',
              transformOrigin: '50% 100%'
            },
            circleHour: {
              width: '0',
              height: '0',
              position: 'absolute',
              top: '50%',
              left: '50%',
              margin: '-25% -4px 0',
              padding: '25% 4px 0',
              borderRadius: '3px',
              background: '#61b2a7',
              '-webkit-transform-origin': '50% 100%',
              '-ms-transform-origin': '50% 100%',
              transformOrigin: '50% 100%'
            },
            circleAfter: {
              position: 'absolute',
              top: '50%',
              left: '50%',
              width: '12px',
              height: '12px',
              margin: '-6px 0 0 -6px',
              background: '#fff',
              borderRadius: '6px',
              content: "",
              background: '#61b2a7',
              display: 'block'
            }
          });


          var Clock = Elem.component({
            init: function() {
              setInterval(this.update, 1000);
            },
            update: function() {
              this.setState({
                seconds: (moment().seconds() % 60) * 6,
                minutes: (moment().minutes() % 60) * 6,
                hours: (moment().hours() % 12) * 30
              });
            },
            initialState: function() {
              return {
                seconds: (moment().seconds() % 60) * 6,
                minutes: (moment().minutes() % 60) * 6,
                hours: (moment().hours() % 12) * 30
              }
            },
            render: function() {
              console.log('render');
              return Elem.el('div', {}, [
                Elem.el('div', { style: Style.circle }, [
                  Elem.el('div', { style: Style.circleHour.extend({ transform: 'rotate(' + this.state().hours + 'deg)'    , '-webkit-transform': 'rotate(' + this.state().hours + 'deg)'  , '-moz-transform': 'rotate(' + this.state().hours + 'deg)'  , '-ms-transform': 'rotate(' + this.state().hours + 'deg)'   }) }, ''),
                  Elem.el('div', { style: Style.circleMinute.extend({ transform: 'rotate(' + this.state().minutes + 'deg)', '-webkit-transform': 'rotate(' + this.state().minutes + 'deg)', '-moz-transform': 'rotate(' + this.state().minutes + 'deg)', '-ms-transform': 'rotate(' + this.state().minutes + 'deg)' }) }, ''),
                  Elem.el('div', { style: Style.circleSecond.extend({ transform: 'rotate(' + this.state().seconds + 'deg)', '-webkit-transform': 'rotate(' + this.state().seconds + 'deg)', '-moz-transform': 'rotate(' + this.state().seconds + 'deg)', '-ms-transform': 'rotate(' + this.state().seconds + 'deg)' }) }, ''),
                  Elem.el('span', { style: Style.circleAfter }, ''),
                  Elem.el('span', { style: Style.circleCentered }, moment().hours() + ' h ' + moment().minutes() + ' m ' + moment().seconds() + ' s')
                ])
              ]);
            }
          });

          Clock().renderTo('#app2');

          function refresh(ctx) {

            function onClick(e) {
              e.preventDefault();
              console.log("click !!!");
              ctx.refresh();
            }

            var seconds = (moment().seconds() % 60) * 6;
            var minutes = (moment().minutes() % 60) * 6;
            var hours = (moment().hours() % 12) * 30;
            return Elem.el('div', [
              Elem.el('button', { type: 'button', onclick: onClick }, "Ping"),
              Elem.el('div', { __asHtml: '<h1>yo</h1>' }),
              Elem.el(Clock, {})
              //Elem.el('div', { className: 'pouet', style: Style.circle, onclick: onClick }, [
              //  Elem.el('div', { style: Style.circleHour.extend({ transform: 'rotate(' + hours + 'deg)'    , '-webkit-transform': 'rotate(' + hours + 'deg)'  , '-moz-transform': 'rotate(' + hours + 'deg)'  , '-ms-transform': 'rotate(' + hours + 'deg)'   }) }, ''),
              //  Elem.el('div', { style: Style.circleMinute.extend({ transform: 'rotate(' + minutes + 'deg)', '-webkit-transform': 'rotate(' + minutes + 'deg)', '-moz-transform': 'rotate(' + minutes + 'deg)', '-ms-transform': 'rotate(' + minutes + 'deg)' }) }, ''),
              //  Elem.el('div', { style: Style.circleSecond.extend({ transform: 'rotate(' + seconds + 'deg)', '-webkit-transform': 'rotate(' + seconds + 'deg)', '-moz-transform': 'rotate(' + seconds + 'deg)', '-ms-transform': 'rotate(' + seconds + 'deg)' }) }, ''),
              //  Elem.el('span', { style: Style.circleAfter }, ''),
              //  Elem.el('span', { style: Style.circleCentered }, moment().hours() + ' h ' + moment().minutes() + ' m ' + moment().seconds() + ' s')
              //])
            ]);
            //Elem.render(tree, '#app');
            //setTimeout(refresh, 1000);
          }
          Elem.render(refresh, '#app');
          //setTimeout(refresh, 0);



        </script>
    </body>
</html>
